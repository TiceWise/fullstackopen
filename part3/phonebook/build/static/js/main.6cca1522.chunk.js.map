{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","services/personService.js","components/Notification.js","App.js","index.js"],"names":["Persons","person","deletePerson","name","number","onClick","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Filter","stringToSearch","handleSearch","baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","id","delete","update","put","Notification","message","className","ErrorNotification","App","useState","persons","setPersons","setNewName","setNewNumber","setStringToSearch","personsToShow","setPersonsToShow","setMessage","errorMessage","setErrorMessage","timeOutDuration","useEffect","initialPersons","event","searchStringLowerCase","target","toLowerCase","filter","toLocaleLowerCase","includes","preventDefault","length","window","confirm","find","updatedPerson","updatedPersonReturned","map","setTimeout","catch","error","personObject","personAdded","concat","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6cca1522.chunk.js","sourcesContent":["import React from 'react'\n\nconst Persons = ({ person, deletePerson }) => {\n  return (\n    <div>\n      {person.name} {person.number}\n      <button onClick={deletePerson}>delete</button>\n    </div>\n  )\n}\n\nexport default Persons","import React from 'react'\n\nconst PersonForm = ({ addName, newName, handleNameChange, newNumber, handleNumberChange }) => {\n  return (\n    <form onSubmit={addName}>\n      <div>\n        name:\n      <input\n          value={newName}\n          onChange={handleNameChange}\n        />\n      </div>\n      <div>\n        number:\n      <input\n          value={newNumber}\n          onChange={handleNumberChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ stringToSearch , handleSearch }) => {\n  return (\n    <form>\n      <div>\n        filter shown with\n      <input\n          value={stringToSearch}\n          onChange={handleSearch}\n        />\n      </div>\n    </form>\n  )\n}\n\nexport default Filter","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  // console.log(`${baseUrl}/${id}`)\n  const request = axios.delete(`${baseUrl}/${id}`)\n  // console.log({request})\n  return request\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst personService = { getAll, create, deletePerson, update }\n\nexport default personService","import React from 'react'\n\nexport const Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n}\n\nexport const ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\n","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personService from './services/personService'\nimport { Notification, ErrorNotification } from './components/Notification'\nimport './index.css'\n\nconst App = () => {\n  // const [persons, setPersons] = useState([\n  //   { name: 'Arto Hellas', number: '040-123456' },\n  //   { name: 'Ada Lovelace', number: '39-44-5323523' },\n  //   { name: 'Dan Abramov', number: '12-43-234345' },\n  //   { name: 'Mary Poppendieck', number: '39-23-6423122' }\n  // ])\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [stringToSearch, setStringToSearch] = useState('')\n  const [personsToShow, setPersonsToShow] = useState([])\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  const timeOutDuration = 5000\n\n  useEffect(() => {\n    // console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        // console.log('promise fulfilled')\n        setPersons(initialPersons)\n        setPersonsToShow(initialPersons) // a bit quick and dirty\n      })\n  }, [])\n\n  // console.log('render', persons.length, 'notes')\n\n  const addName = (event) => {\n    event.preventDefault()\n\n    const checkName = persons.filter(person => (person.name === newName))\n\n    if (checkName.length > 0) {\n      const result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (result) {\n        const person = persons.find(person => (person.name === newName))\n        const updatedPerson = { ...person, number: newNumber}\n        personService\n          .update(person.id, updatedPerson)\n          .then(updatedPersonReturned => {\n            setPersons(persons.map(person => person.name !== newName ? person : updatedPersonReturned))\n            setPersonsToShow(personsToShow.map(person => person.name !== newName ? person : updatedPersonReturned))\n            setNewName('')\n            setNewNumber('')\n            setMessage(`Updated ${person.name}'s number to ${newNumber}`)\n            setTimeout(() => {\n              setMessage(null)\n            }, timeOutDuration)\n          })\n          .catch(error => {\n            setErrorMessage(`Information of ${person.name} has already been removed from server`)\n            setTimeout(() => {\n              setMessage(null)\n            }, timeOutDuration)\n            setPersons(persons.filter(person => (person.name !== newName)))\n            setPersonsToShow(personsToShow.filter(person => (person.name !== newName)))\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    }\n    else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n\n      personService\n        .create(personObject)\n        .then(personAdded => {\n          setPersons(persons.concat(personAdded))\n          setPersonsToShow(persons.concat(personAdded))\n          setNewName('')\n          setNewNumber('')\n          setStringToSearch('')\n          setMessage(`Added ${personObject.name}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, timeOutDuration)\n        })\n    }\n  }\n\n  const deletePerson = (id) => {\n    // console.log({id})\n    const personToDelete = persons.find(person => person.id === id)\n    // console.log({personToDelete})\n    if (personToDelete) {\n      const result = window.confirm(`Delete ${personToDelete.name}?`)\n      if (result) {\n        personService\n          .deletePerson(id)\n          .then(response => {\n            // console.log('so far...')\n            setPersons(persons.filter(person => person.id !== id))\n            setPersonsToShow(personsToShow.filter(person => person.id !== id))\n            setMessage(`Deleted ${personToDelete.name}`)\n            setTimeout(() => {\n              setMessage(null)\n            }, timeOutDuration)\n          })\n      }\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n    const searchStringLowerCase = event.target.value.toLowerCase()\n    if (searchStringLowerCase) {\n      // console.log(`searching ${searchStringLowerCase}...`)\n      setPersonsToShow(persons.filter(person =>\n        person.name.toLocaleLowerCase().includes(searchStringLowerCase)))\n    }\n    else {\n      setPersonsToShow(persons)\n    }\n    setStringToSearch(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <ErrorNotification message={errorMessage} />\n      <Filter stringToSearch={stringToSearch} handleSearch={handleSearch} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h3>Numbers</h3>\n      <div>\n        {personsToShow.map((person) =>\n          <Persons \n            key={person.id}\n            person={person}\n            deletePerson={() => deletePerson(person.id)}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}